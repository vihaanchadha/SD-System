{"ast":null,"code":"var _jsxFileName = \"/Users/vihaanchadha/sd-system/frontend/src/components/DeploymentHistory.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Chip } from \"@mui/material\";\nimport { getDeployments } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DeploymentHistory = () => {\n  _s();\n  const [deployments, setDeployments] = useState([]);\n  useEffect(() => {\n    // Initial fetch\n    getDeployments().then(res => setDeployments(res.data)).catch(err => console.error(\"Error fetching deployments:\", err));\n\n    // WebSocket connection\n    const ws = new WebSocket(\"ws://localhost:8000/ws/deployments/\");\n    ws.onmessage = event => {\n      const data = JSON.parse(event.data);\n      setDeployments(prev => prev.map(dep => dep.id === data.id ? {\n        ...dep,\n        status: data.status,\n        updated_at: data.updated_at\n      } : dep));\n    };\n    ws.onerror = err => console.error(\"WebSocket error:\", err);\n    ws.onclose = () => console.log(\"WebSocket disconnected.\");\n    return () => ws.close(); // Cleanup\n  }, []);\n  const getStatusColor = status => {\n    switch (status) {\n      case \"completed\":\n        return \"success\";\n      case \"pending\":\n        return \"warning\";\n      case \"in_progress\":\n        return \"info\";\n      case \"failed\":\n        return \"error\";\n      default:\n        return \"default\";\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(TableContainer, {\n    component: Paper,\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      children: [/*#__PURE__*/_jsxDEV(TableHead, {\n        children: /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"Client\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"Package\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"Status\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"Created At\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: \"Updated At\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n        children: deployments.map(deployment => /*#__PURE__*/_jsxDEV(TableRow, {\n          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n            children: deployment.client\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: deployment.package\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: /*#__PURE__*/_jsxDEV(Chip, {\n              label: deployment.status,\n              color: getStatusColor(deployment.status),\n              size: \"small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: new Date(deployment.created_at).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n            children: new Date(deployment.updated_at).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 15\n          }, this)]\n        }, deployment.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(DeploymentHistory, \"hShX740iRzPW1TozCfzsRarWw7k=\");\n_c = DeploymentHistory;\nexport default DeploymentHistory;\nvar _c;\n$RefreshReg$(_c, \"DeploymentHistory\");","map":{"version":3,"names":["React","useState","useEffect","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Chip","getDeployments","jsxDEV","_jsxDEV","DeploymentHistory","_s","deployments","setDeployments","then","res","data","catch","err","console","error","ws","WebSocket","onmessage","event","JSON","parse","prev","map","dep","id","status","updated_at","onerror","onclose","log","close","getStatusColor","component","children","fileName","_jsxFileName","lineNumber","columnNumber","deployment","client","package","label","color","size","Date","created_at","toLocaleString","_c","$RefreshReg$"],"sources":["/Users/vihaanchadha/sd-system/frontend/src/components/DeploymentHistory.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  Chip,\n} from \"@mui/material\";\nimport { getDeployments } from \"../api\";\n\nconst DeploymentHistory = () => {\n  const [deployments, setDeployments] = useState([]);\n\n  useEffect(() => {\n    // Initial fetch\n    getDeployments()\n      .then((res) => setDeployments(res.data))\n      .catch((err) => console.error(\"Error fetching deployments:\", err));\n\n    // WebSocket connection\n    const ws = new WebSocket(\"ws://localhost:8000/ws/deployments/\");\n\n    ws.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n\n      setDeployments((prev) =>\n        prev.map((dep) =>\n          dep.id === data.id\n            ? { ...dep, status: data.status, updated_at: data.updated_at }\n            : dep\n        )\n      );\n    };\n\n    ws.onerror = (err) => console.error(\"WebSocket error:\", err);\n    ws.onclose = () => console.log(\"WebSocket disconnected.\");\n\n    return () => ws.close(); // Cleanup\n  }, []);\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case \"completed\":\n        return \"success\";\n      case \"pending\":\n        return \"warning\";\n      case \"in_progress\":\n        return \"info\";\n      case \"failed\":\n        return \"error\";\n      default:\n        return \"default\";\n    }\n  };\n\n  return (\n    <TableContainer component={Paper}>\n      <Table>\n        <TableHead>\n          <TableRow>\n            <TableCell>Client</TableCell>\n            <TableCell>Package</TableCell>\n            <TableCell>Status</TableCell>\n            <TableCell>Created At</TableCell>\n            <TableCell>Updated At</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {deployments.map((deployment) => (\n            <TableRow key={deployment.id}>\n              <TableCell>{deployment.client}</TableCell>\n              <TableCell>{deployment.package}</TableCell>\n              <TableCell>\n                <Chip\n                  label={deployment.status}\n                  color={getStatusColor(deployment.status)}\n                  size=\"small\"\n                />\n              </TableCell>\n              <TableCell>\n                {new Date(deployment.created_at).toLocaleString()}\n              </TableCell>\n              <TableCell>\n                {new Date(deployment.updated_at).toLocaleString()}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n};\n\nexport default DeploymentHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}